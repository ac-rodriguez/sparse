#!/usr/bin/env bash

set -x
set -e

#tiles=(R018_T47NQA R046_T50PNQ R132_T49MCV R132_T49MDV)
#tiles=(R046_T50PNQ R046_T50PPR R046_T50PNR)
#tiles=(R046_T50PPR R046_T50PNR R132_T49NCA R132_T49NDA)
#tiles=(T49NCB T49NDB T49NEB)
#tiles=(T49MDV T49MCV T47NQA T50PNQ)
#tiles=(T50PNQ T50PNR T47NQA T49MCV T49MDV T49NCA T49NDA)
#tiles=(T49NCB T49NDB T49NEB)
#tiles=(T49MCV)
#tiles=(T49NED) #T49NEC T49NFC T49NFD T49NGD)

#tiles=(T49NED T49NEC T49NFC T49NFD T49NGD T49MCV)
#tiles=(T49NFC T49NFD T49NGD)
# Tiles sarawak
#tiles=(T49NCB T49NCC T49NDA T49NDB T49NDC T49NEB T49NEC T49NED T49NFB T49NFC T49NFD T49NGB T49NGC T49NGD T49NGE T49NHB T49NHC T49NHD T49NHE T49NHF T50NKG T50NKH T50NKJ T50NKK T50NKL T50NLH T50NLJ T50NLK T50NLL)
# tiles peninsula
#tiles=(T47NNG T47NNH T47NPE T47NPF T47NPG T47NPH T47NQC T47NQD T47NQE T47NQF T47NQG T47NQH T47NRC T47NRD T47NRE T47NRF T47NRG T47NRH T48NTG T48NTH T48NTJ T48NTK T48NTL T48NTM T48NUG T48NUH T48NUJ T48NUK T48NUL T48NVG T48NVH T48NVJ)
#tiles=(T47NRE T48NTK T48NTJ)
#tiles=(T47NRE T47NQD T48NUH)

#tiles north
#tiles=(T47NQD T48NTK T48NTJ T48NUH)
#tiles=(T47NQD T48NUH T48NTL)
# tiles sabah
#tiles=(T50NLK T50NLL T50NLM T50NMK T50NML T50NMM T50NMN T50NMP T50NNK T50NNL T50NNM T50NNN T50NNP T50NPK T50NPL T50NPM T50NPN T50NQK T50NQL T50NQM)

# RIAU
#tiles=(T47MPV T47MQU T47MQV T47MRU T47MRV T47NPA T47NPB T47NPC T47NQA T47NQB T47NQC T47NRA T47NRB T47NRC T48MTD T48MTE T48MUE T48NTF T48NTG T48NUF)
#modeldir=$WORK/sparse/inference/palmriau_simpleA9all

#modeldir=$WORK/sparse/inference/palmsabah_simpleA9all

#modeldir=$WORK/sparse/inference/palmpeninsulanew_simpleA9all
 
# tiles=( T48MZD T48NZF T48NZH T49MBU T49MBV
        # T49MCS T49MCT T49MCU T49MCV T49MDS
        # T49MDT T49MDU T49MDV T49MES T49MET 
        # T49MEU T49MEV T49MFV T49MGV T49NBA 
        # T49NBB T49NBC T49NCA T49NCB T49NCC 
        # T49NDA T49NDB T49NEA T49NEB T49NFA 
        # T49NFB T49NGA T49NGB T49NHA T49NHB)

#142
#tiles=(T48MZD T48NZF T48NZH T49MBU T49MBV T49MCS T49MCT T49MCU T49MCV T49MDS T49MDT T49MDU T49MDV T49MES T49MET T49MEU T49MEV T49MFS T49MFT T49MFU T49MFV T49MGS T49MGT T49MGU T49MGV T49MHR T49MHS T49MHT T49MHU T49MHV T49NBA T49NBB T49NBC T49NCA T49NCB T49NCC T49NDA T49NDB T49NEA T49NEB T49NFA T49NFB T49NGA T49NGB T49NHA T49NHB T50MKA T50MKB T50MKC T50MKD T50MKE T50MLA T50MLB T50MLC T50MLD T50MLE T50MLV T50MMA T50MMB T50MMC T50MMD T50MME T50MMV T50MNB T50MNC T50MND T50MNE T50MNV T50MPC T50NKF T50NKG T50NKH T50NKJ T50NLF T50NLG T50NLH T50NLJ T50NLK T50NMF T50NMG T50NMH T50NMJ T50NMK T50NNF T50NNG T50NNH T50NNJ T50NNK T50NPF T50NPG T50NPH T50NPK T50NQF T50NQG T50NQH T49NCB T49NCC T49NDA T49NDB T49NDC T49NEB T49NEC T49NED T49NFB T49NFC T49NFD T49NGB T49NGC T49NGD T49NGE T49NHB T49NHC T49NHD T49NHE T49NHF T50NKG T50NKH T50NKJ T50NKK T50NKL T50NLH T50NLJ T50NLK T50NLL T50NLM T50NMK T50NML T50NMM T50NMN T50NMP T50NNK T50NNL T50NNM T50NNN T50NNP T50NPK T50NPL T50NPM T50NPN T50NQK T50NQL T50NQM)
# modeldir=$WORK/sparse/inference/palm_borneo_simpleA30_mc10
#modeldir=$WORK/sparse/inference/palmborneo_simpleA9_soft_mc5

#121 phillipines
#tiles=(T50NMP T50NNP T50NPM T50NPN T50NPP T50NQL T50NQM T50NRL T50NRM T50NRN T50PMQ T50PNQ T50PNQ T50PNR T50PPQ T50PPR T50PPS T50PQC T50PQR T50PQS T50PQT T50PQU T50PRA T50PRB T50PRC T50PRS T50PRT T50PRU T50PRV T50QQD T50QRD T50QRE T50QRF T51NTF T51NTG T51NTH T51NUG T51NUH T51NUJ T51NVH T51NVJ T51NWH T51NWJ T51NXG T51NXH T51NXJ T51NYF T51NYG T51NYH T51NYJ T51NZG T51NZH T51NZJ T51PTL T51PTM T51PTN T51PTP T51PTQ T51PTR T51PTS T51PTT T51PUL T51PUM T51PUN T51PUP T51PUQ T51PUR T51PUS T51PUT T51PVK T51PVL T51PVM T51PVN T51PVP T51PVQ T51PVR T51PVS T51PVT T51PWK T51PWL T51PWM T51PWN T51PWP T51PWQ T51PWR T51PWS T51PXK T51PXL T51PXM T51PXN T51PXP T51PXQ T51PXR T51PYK T51PYL T51PYM T51PYN T51PYP T51PYQ T51PZK T51PZL T51PZM T51PZN T51QTA T51QTU T51QTV T51QUA T51QUB T51QUC T51QUD T51QUU T51QUV T51QVA T51QVB T51QVC T51QVU T51QVV T52NBN T52NBP T52PBQ T52PBR)
#modeldir=$WORK/sparse/inference/coco_phillipines_simpleA9_mc10
#modeldir=$WORK/sparse/inference/coco_phillipines_simpleA9_soft_mc5


#DATASET=palm4650
# 178
#tiles=(T46NGH T46NGJ T46NGK T46NGM T46NHH T46NHJ T46NHK T46NHM T50MMC T50NQL T50MMD T50MLC T46NGL T50NLM T50PPR T50NLL T50LKR T50LLR T50LMQ T50LMR T50LNQ T50LNR T50LPR T50LQQ T50LQR T50LRP T50LRQ T50LRR T50MKA T50MKB T50MKC T50MKD T50MKE T50MKS T50MKT T50MKU T50MKV T50MLA T50MLB T50MLC T50MLD T50MLE T50MLS T50MLT T50MLV T50MMA T50MMB T50MMC T50MMD T50MMS T50MMT T50MMV T50MNB T50MNC T50MND T50MNE T50MNS T50MNT T50MNV T50MPB T50MPC T50MPS T50MPT T50MPU T50MPV T50MQA T50MQB T50MQE T50MQS T50MQT T50MQU T50MQV T50MRA T50MRB T50MRC T50PNQ T50MRE T50MRT T50MRU T50MRV T50NKF T50NKG T50NKH T50NKJ T50NLF T50NLG T50NLH T50NLJ T50NLK T50NMF T50NMG T50NMH T50NMJ T50NMK T50NMP T50NNF T50NNG T50NNH T50NNJ T50NNK T50NNP T50NPF T50NPH T50NPK T50NPM T50NPN T50NPP T50NQF T50NQG T50NQH T50NQL T50NQM T50NRF T50NRG T50NRL T50NRM T50NRN T50PMQ T50PNQ T50PNQ T50PNR T50PPQ T50PPS T50PQC T50PQR T50PQT T50PQU T50PRA T50PRB T50PRC T50PRS T50PRT T50PRU T50PRV T50QQD T50QRD T50QRE T50QRF T50NQL T50NQL T50NPG T50NNK T50NNK T50NNF T50NMN T50NMN T50NLM T50NLL T50MRD T50MQD T50MQC T50NKG T50NKH T50NKJ T50NKK T50NKL T50NLH T50NLJ T50NLK T50NMK T50NML T50NMM T50NMP T50NPM/50NNM T50NNL T50NNM T50NNN T50NNP T50NPK T50NPL T50NPM T50NPN T50NQK T50NPL/50NPK T50MME T50NQM T50PQS T46NHL)
#modeldir=$WORK/sparse/inference/palm4650_simpleA9_soft_mc5

# DATASET=palm4748a
# # 163
# tiles=(T47MLV T47MMV T47MNS T47MNT T47MNU T47MNV T47MPS T47MPT T47MPU T47MQR T47MQS T47MQT T47MQV T47MRP T47MRQ T47MRR T47MRT T47NLD T47NLB T47NKA T47NKB T47NKC T47NKD T47NKE T47NLA T47NLC T47NLF T47NMA T47NMB T47NPC T47NME T47NMF T47NNE T47NPB T47NPD T47NQA T47NQB T47NQC T47NRB T47NRC T48MTA T48MTB T48MUB T47NND T48MTE T48MTU T48MTV T47NNC T48MUD T48MUE T48MUU T48MUV T48MVA T48MVC T48MVD T48MVE T48MVU T48NUG T48MWA T48MWC T48MWD T48MWE T48MWT T48MWU T48MXA T48MXB T48MXC T48MXD T48MXS T48MXT T48MXU T48MXV T48MYB T48MYC T48MYS T48MYT T48MYU T48MZA T48MZB T48MZC T48MZD T48MZS T48MZT T48MZU T48NTF T48NTG T48NUF T48NUG T48NVF T48NVG T48NWH T48NWJ T48NXG T48NXH T48NXJ T48NYF T48NYG T48NYJ T48NYK T48NYL T48NZF T48NZH T48NZJ T48NZK T48NZL T47NNA T47MMU T48MVV T47NLE T48NUG T48NTK T47NNG T47NNH T47NPE T48NTK T48MWV T47NPG T47NPH T47NQC T48MWB T48MVB T47NQE T47NQF T47NQG T47NQH T47NRC T47NRD T47NRE T47NRF T48MUC T48MUA T47NRH T48NTG T48NTH T48NTJ T48MTD T48MTC T48NTL T48NTM T47NRG T47NRG T48NUH T48NUJ T48NUK T48NUL T48NVG T48NVH T48NVJ T47NRA T47NQD T47NQD T47NPF T47NPF T47NPA T47NMD T47NMC T47NKF T47MRU T47MRS T47MQU T47MPV T47MRV T47NNB)
# #tiles=(T48MVV T48NUG T47NNC T47NNA T47NQE T46NGL T47NLE T48MTD T48NTJ T48MVB)
# modeldir=$WORK/sparse/inference/palm4748a_simpleA9_soft_ens5


# DATASET=palm4
# 665
# tiles=(T46NGH T46NGJ T46NGK T49NCB T46NGM T46NHH T46NHJ T46NHK T46NHM T47MLV T47MMV T47MNS T47MNT T47MNU T47MNV T47MPS T47MPT T47MPU T51NUB T47MQR T47MQS T47MQT T49NGD T47MQV T47MRP T47MRQ T47MRR T49NFD T47MRT T47NLD T47NLB T47NKA T47NKB T47NKC T47NKD T47NKE T51NXB T47NLA T51NXA T47NLC T50MMC T49NCB T47NLF T47NMA T47NMB T47NPC T50NQL T47NME T47NMF T50MMD T50MLC T49NHE T49MFT/49MGT T47NNE T49MEV/49NEA T47NPB T49MET T47NPD T47NQA T47NQB T47NQC T46NGL T47NRB T47NRC T48MTA T48MTB T48MUB T47NND T48MTE T48MTU T48MTV T47NNC T50NLM T49NED T48MUD T48MUE T48MUU T48MUV T48MVA T49NEC T48MVC T48MVD T48MVE T48MVU T48NUG T48MWA T48MWC T48MWD T48MWE T48MWT T48MWU T48MXA T48MXB T48MXC T48MXD T48MXS T48MXT T48MXU T48MXV T48MYB T48MYC T48MYS T48MYT T48MYU T48MZA T48MZB T48MZC T48MZD T48MZS T48MZT T48MZU T48NTF T48NTG T48NUF T48NUG T48NVF T48NVG T48NWH T48NWJ T48NXG T48NXH T48NXJ T48NYF T48NYG T48NYJ T48NYK T48NYL T48NZF T48NZH T48NZJ T48NZK T48NZL T49LDL T49LEL T49LFL T49LGL T49LHL T49MBM T49MBN T49MBP T49MBS T49MBT T49MBU T49MBV T49MCM T49MCN T49MCP T49MCS T49MCT T49MCU T49MCV T49MDM T49MDN T49MDP T49MDS T49MDT T49MDU T49MEM T49MEN T49MEP T49MES T49MEV T49MFM T49MFN T49MFP T49MFT T49MFU T49MFV T49MGM T49MGN T49MGS T49MGT T49MGU T49MGV T49MHM T49MHN T49MHP T49MHQ T49MHR T51MTT T49MHT T49MHU T49MHV T49NBA T49NBB T49NBC T49NBD T49NBE T49NCA T47NNA T49NCC T49NDA T49NDB T49NEA T49NEB T47MMU T49NFB T50NLL T49NGB T49NHA T49NHB T50LKR T50LLR T50LMQ T50LMR T50LNQ T50LNR T50LPR T50LQQ T50LQR T50LRP T50LRQ T50LRR T50MKA T50MKB T50MKC T50MKD T50MKE T50MKS T50MKT T50MKU T50MKV T50MLA T50MLB T50MLC T50MLD T50MLE T50MLS T50MLT T50MLV T50MMA T50MMB T50MMC T50MMD T49NDB T50MMS T50MMT T50MMV T50MNB T50MNC T50MND T50MNE T50MNS T50MNT T50MNV T50MPB T50MPC T50MPS T50MPT T50MPU T50MPV T50MQA T50MQB T52MGE T50MQE T50MQS T50MQT T50MQU T50MQV T50MRA T50MRB T50MRC T50MRE T50MRT T50MRU T50MRV T50NKF T50NKG T50NKH T50NKJ T50NLF T50NLG T50NLH T50NLJ T50NLK T50NMF T50NMG T50NMH T50NMJ T50NMK T50NNF T50NNG T50NNH T50NNJ T50NNK T50NPF T49NCA T50NPH T50NPK T50NQF T50NQG T50NQH T50NRF T50NRG T48MVV T47NLE T54MVS T51LTJ T51LTK T51LTL T51LUJ T51LUL T51LVH T51LVJ T51LVL T51LWH T51LWJ T51LWK T51LWL T51LXJ T51LXK T51LXL T51LYK T51LYL T51LZL T51MTM T51MTN T51MTP T51MTQ T51MTR T51MTS T52MGD T51MTU T51MTV T51MUM T51MUN T51MUP T51MUQ T51MUS T51MUT T51MUU T51MUV T51MVM T51MVN T51MVP T51MVQ T51MVT T51MVV T51MWM T51MWP T51MWQ T51MWR T51MWS T51MWT T51MWU T51MWV T51MXM T51MXP T51MXQ T51MXT T51MXU T51MYM T51MYT T51MYU T51MZM T51MZN T51MZR T51MZS T51MZT T51MZU T51NTA T51NTB T51NUA T51NVA T51NVB T51NWA T51NWB T51MVU T51NXC T51MVR T51MUR T50NQL T51NYC T51NYD T51NYE T51NYF T50NQL T51NZB T51NZD T51NZE T51NZG T50NPG T50NNK T50NNK T50NNF T50NMN T50NMN T50NLM T50NLL T50MRD T50MQD T50MQC T49NHE T49NHE T49NGA T49NFA T49NED T49NEC T49NEB T49NEB T52LCR T52LDR T52LER T52LFR T52LGR T52MBA T52MBB T52MBC T52MBD T52MBE T52MBS T52MBT T52MCA T52MCB T52MCC T52MCD T52MCE T52MCS T52MCU T52MCV T52MDA T52MDB T52MDC T52MDD T52MDE T52MDS T52MDT T52MEA T52MEB T52MEC T52MED T52MEE T52MES T52MET T52MEU T52MEV T52MFA T52MFB T52MFC T52MFD T52MFE T52MFS T52MFU T52MFV T52MGA T52MGB T52MGC T49NDB T49NCB T52MGS T52MGT T52MGV T52MHA T52MHB T52MHC T49MHS T52MHE T52MHS T52MHT T52MHU T52MHV T52NBF T52NBG T52NBK T52NBL T52NBM T52NCF T52NCG T52NCH T52NDF T52NDG T52NDH T52NDJ T52NEF T52NFF T52NGF T52NGG T53LQL T53LRL T53MKP T53MKQ T53MKR T53MKS T53MKT T53MKU T53MKV T53MLN T53MLP T49MFS T53MLS T53MLT T53MLU T49MEU T53MMN T53MMP T53MMQ T53MMR T53MMS T53MMT T53MMU T53MMV T53MNQ T53MNR T53MNS T53MNT T53MNU T53MNV T53MPQ T49MET T53MPS T49MDV T53MPU T53MPV T53MQM T53MQQ T53MQR T53MQS T53MQT T53MQU T53MRM T53MRN T53MRP T53MRQ T53MRR T53MRS T53MRT T53MRU T53NLA T53NMA T53NMB T54LTR T54LUR T54LVQ T54LVR T54LWQ T54LWR T54MTA T54MTB T54MTC T54MTD T54MTS T54MTT T54MTU T54MTV T54MUA T54MUB T48NUG T54MUS T54MUT T54MUU T54MUV T54MVA T54MVB T54MVC T48NTK T54MVT T54MVU T54MVV T54MWA T54MWB T54MWC T54MWS T54MWU T54MWV T47NNG T47NNH T47NPE T48NTK T48MWV T47NPG T47NPH T47NQC T48MWB T48MVB T47NQE T47NQF T47NQG T47NQH T47NRC T47NRD T47NRE T47NRF T48MUC T48MUA T47NRH T48NTG T48NTH T48NTJ T48MTD T48MTC T48NTL T48NTM T47NRG T47NRG T48NUH T48NUJ T48NUK T48NUL T48NVG T48NVH T48NVJ T49NCB T49NCC T49NDA T47NRA T47NQD T49NDC T47NQD T47NPF T47NPF T47NPA T47NMD T47NMC T49NFB T49NFC T49NFD T49NGB T49NGC T49NGD T49NGE T49NHB T49NHC T49NHD T47NKF T47MRU T49NHF T50NKG T50NKH T50NKJ T50NKK T50NKL T50NLH T50NLJ T50NLK T47MRS T47MQU T47MPV T53MPT T50NMK T50NML T50NMM T50NMP T51MVS T50NPM/50NNM T50NNL T50NNM T50NNN T50NNP T50NPK T50NPL T50NPM T50NPN T50NQK T50NPL/50NPK T50MME T50NQM T47MRV T54MUC T53MPR T53MLV T53MLR T52MHD T51NYB T47NNB T46NHL)
# modeldir=$WORK/sparse/inference/palm4_simpleA9_soft_ens5
modeldir=$WORK/sparse/inference/palm4_act_simpleA9_soft_ens5
# tiles=(T47NPE T49MHN T52MBE T51NXB T50NRG T50MQE T47NKB T47MMU T51LVL T48NVG T50NMF T47MRS T47NLC T49LHL T49MGS)
tiles=(T47MRS T47NLC T49LHL T49MGS)

# DATASET=palm2019
# 612
# tiles=(T46NGH T46NGJ T46NGK T46NGL T46NGM T46NHH T46NHJ T46NHK T46NHL T46NHM T47MLV T47MMU T47MMV T47MNS T47MNT T47MNU T47MNV T47MPS T47MPT T47MPU T47MPV T47MQR T47MQS T47MQT T47MQU T47MQV T47MRP T47MRQ T47MRR T47MRS T47MRT T47MRU T47MRV T47NKA T47NKB T47NKC T47NKD T47NKE T47NKF T47NLA T47NLB T47NLC T47NLD T47NLE T47NLF T47NMA T47NMB T47NMC T47NMD T47NME T47NMF T47NNA T47NNB T47NNC T47NND T47NNE T47NNG T47NNH T47NPA T47NPB T47NPC T47NPD T47NPE T47NPF T47NPG T47NPH T47NQA T47NQB T47NQC T47NQD T47NQE T47NQF T47NQG T47NQH T47NRA T47NRB T47NRC T47NRD T47NRE T47NRF T47NRG T47NRH T48MTA T48MTB T48MTC T48MTD T48MTE T48MTU T48MTV T48MUA T48MUB T48MUC T48MUD T48MUE T48MUU T48MUV T48MVA T48MVB T48MVC T48MVD T48MVE T48MVU T48MVV T48MWA T48MWB T48MWC T48MWD T48MWE T48MWT T48MWU T48MWV T48MXA T48MXB T48MXC T48MXD T48MXS T48MXT T48MXU T48MXV T48MYB T48MYC T48MYS T48MYT T48MYU T48MZA T48MZB T48MZC T48MZD T48MZS T48MZT T48MZU T48NTF T48NTG T48NTH T48NTJ T48NTK T48NTL T48NTM T48NUF T48NUG T48NUH T48NUJ T48NUK T48NUL T48NVF T48NVG T48NVH T48NVJ T48NWH T48NWJ T48NXG T48NXH T48NXJ T48NYF T48NYG T48NYJ T48NYK T48NYL T48NZF T48NZH T48NZJ T48NZK T48NZL T49LDL T49LEL T49LFL T49LGL T49LHL T49MBM T49MBN T49MBP T49MBS T49MBT T49MBU T49MBV T49MCM T49MCN T49MCP T49MCS T49MCT T49MCU T49MCV T49MDM T49MDN T49MDP T49MDS T49MDT T49MDU T49MDV T49MEM T49MEN T49MEP T49MES T49MET T49MEU T49MEV T49MFM T49MFN T49MFP T49MFS T49MFT T49MFU T49MFV T49MGM T49MGN T49MGS T49MGT T49MGU T49MGV T49MHM T49MHN T49MHP T49MHQ T49MHR T49MHS T49MHT T49MHU T49MHV T49NBA T49NBB T49NBC T49NBD T49NBE T49NCA T49NCB T49NCC T49NDA T49NDB T49NDC T49NEA T49NEB T49NEC T49NED T49NFA T49NFB T49NFC T49NFD T49NGA T49NGB T49NGC T49NGD T49NGE T49NHA T49NHB T49NHC T49NHD T49NHE T49NHF T50LKR T50LLR T50LMQ T50LMR T50LNQ T50LNR T50LPR T50LQQ T50LQR T50LRP T50LRQ T50LRR T50MKA T50MKB T50MKC T50MKD T50MKE T50MKS T50MKT T50MKU T50MKV T50MLA T50MLB T50MLC T50MLD T50MLE T50MLS T50MLT T50MLV T50MMA T50MMB T50MMC T50MMD T50MME T50MMS T50MMT T50MMV T50MNB T50MNC T50MND T50MNE T50MNS T50MNT T50MNV T50MPB T50MPC T50MPS T50MPT T50MPU T50MPV T50MQA T50MQB T50MQC T50MQD T50MQE T50MQS T50MQT T50MQU T50MQV T50MRA T50MRB T50MRC T50MRD T50MRE T50MRT T50MRU T50MRV T50NKF T50NKG T50NKH T50NKJ T50NKK T50NKL T50NLF T50NLG T50NLH T50NLJ T50NLK T50NLL T50NLM T50NMF T50NMG T50NMH T50NMJ T50NMK T50NML T50NMM T50NMN T50NMP T50NNF T50NNG T50NNH T50NNJ T50NNK T50NNL T50NNM T50NNN T50NNP T50NPF T50NPG T50NPH T50NPK T50NPL T50NPM T50NPN T50NQF T50NQG T50NQH T50NQK T50NQL T50NQM T50NRF T50NRG T51LTJ T51LTK T51LTL T51LUJ T51LUL T51LVH T51LVJ T51LVL T51LWH T51LWJ T51LWK T51LWL T51LXJ T51LXK T51LXL T51LYK T51LYL T51LZL T51MTM T51MTN T51MTP T51MTQ T51MTR T51MTS T51MTT T51MTU T51MTV T51MUM T51MUN T51MUP T51MUQ T51MUR T51MUS T51MUT T51MUU T51MUV T51MVM T51MVN T51MVP T51MVQ T51MVR T51MVS T51MVT T51MVU T51MVV T51MWM T51MWP T51MWQ T51MWR T51MWS T51MWT T51MWU T51MWV T51MXM T51MXP T51MXQ T51MXT T51MXU T51MYM T51MYT T51MYU T51MZM T51MZN T51MZR T51MZS T51MZT T51MZU T51NTA T51NTB T51NUA T51NUB T51NVA T51NVB T51NWA T51NWB T51NXA T51NXB T51NXC T51NYB T51NYC T51NYD T51NYE T51NYF T51NZB T51NZD T51NZE T51NZG T52LCR T52LDR T52LER T52LFR T52LGR T52MBA T52MBB T52MBC T52MBD T52MBE T52MBS T52MBT T52MCA T52MCB T52MCC T52MCD T52MCE T52MCS T52MCU T52MCV T52MDA T52MDB T52MDC T52MDD T52MDE T52MDS T52MDT T52MEA T52MEB T52MEC T52MED T52MEE T52MES T52MET T52MEU T52MEV T52MFA T52MFB T52MFC T52MFD T52MFE T52MFS T52MFU T52MFV T52MGA T52MGB T52MGC T52MGD T52MGE T52MGS T52MGT T52MGV T52MHA T52MHB T52MHC T52MHD T52MHE T52MHS T52MHT T52MHU T52MHV T52NBF T52NBG T52NBK T52NBL T52NBM T52NCF T52NCG T52NCH T52NDF T52NDG T52NDH T52NDJ T52NEF T52NFF T52NGF T52NGG T53LQL T53LRL T53MKP T53MKQ T53MKR T53MKS T53MKT T53MKU T53MKV T53MLN T53MLP T53MLR T53MLS T53MLT T53MLU T53MLV T53MMN T53MMP T53MMQ T53MMR T53MMS T53MMT T53MMU T53MMV T53MNQ T53MNR T53MNS T53MNT T53MNU T53MNV T53MPQ T53MPR T53MPS T53MPT T53MPU T53MPV T53MQM T53MQQ T53MQR T53MQS T53MQT T53MQU T53MRM T53MRN T53MRP T53MRQ T53MRR T53MRS T53MRT T53MRU T53NLA T53NMA T53NMB T54LTR T54LUR T54LVQ T54LVR T54LWQ T54LWR T54MTA T54MTB T54MTC T54MTD T54MTS T54MTT T54MTU T54MTV T54MUA T54MUB T54MUC T54MUS T54MUT T54MUU T54MUV T54MVA T54MVB T54MVC T54MVS T54MVT T54MVU T54MVV T54MWA T54MWB T54MWC T54MWS T54MWU T54MWV)
# modeldir=$WORK/sparse/inference/palm2019_simpleA9_soft_ens5


# Small test phillipines
#tiles=(T50PQS T51PUP T51NXH)
# tiles=(T50NMP T50NNP T50NPM T50NPN T50NPP T50NQL T50NQM T50NRL T50NRM T50NRN T50PMQ T50PNQ T50PNR T50PPQ T50PPR T50PPS T50PQC T50PQR T50PQT T50PQU T50PRA T50PRB T50PRC T50PRS T50PRT T50PRU T50PRV T50QQD T50QRD T50QRE T50QRF T51NTF T51NTG T51NTH T51NUG T51NUH T51NUJ T51NVH T51NVJ T51NWH T51NWJ T51NXG T51NXJ T51NYF T51NYG T51NYH T51NYJ T51NZG T51NZH T51NZJ T51PTL T51PTM T51PTN T51PTP T51PTQ T51PTR T51PTS T51PTT T51PUL T51PUM T51PUN T51PUQ T51PUR T51PUS T51PUT T51PVK T51PVL T51PVM T51PVN T51PVP T51PVQ T51PVR T51PVS T51PVT T51PWK T51PWL T51PWM T51PWN T51PWP T51PWQ T51PWR T51PWS T51PXK T51PXL T51PXM T51PXN T51PXP T51PXQ T51PXR T51PYK T51PYL T51PYM T51PYN T51PYP T51PYQ T51PZK T51PZL T51PZM T51PZN T51QTA T51QTU T51QTV T51QUA T51QUB T51QUC T51QUD T51QUU T51QUV T51QVA T51QVB T51QVC T51QVU T51QVV T52NBN T52NBP T52PBQ T52PBR)  # T50PQS T51PUP T51NXH
# locs=(phillipines_2017)
# modeldir=$WORK/sparse/inference/cocopreactive_simpleA9_soft_mc5



# tiles=(T49MCV)
#82
#tiles=(T50MNV T50MPB T50MPC T50MPU T50MPV T50MQA T50MQB T50MQC T50MQD T50MQE T50MQU T50MQV T50MRA T50MRB T50MRC T50MRD T50MRE T50MRT T50MRU T50MRV T50NQF T50NRF T50NRG T51MTM T51MTN T51MTP T51MTQ T51MTR T51MTS T51MTT T51MTU T51MTV T51MUM T51MUN T51MUP T51MUQ T51MUR T51MUS T51MUT T51MUU T51MUV T51MVN T51MVP T51MVQ T51MVR T51MVS T51MVT T51MVU T51MVV T51MWP T51MWQ T51MWR T51MWS T51MWT T51MWU T51MWV T51MXP T51MXQ T51MXT T51MXU T51NTA T51NTB T51NUA T51NUB T51NVA T51NVB T51NWA T51NWB T51NXA T51NXB T51NXC T51NYB T51NYC T51NYD T51NYE T51NYF T51NZD T51NZE T51NZG T52NBK T52NBL T52NBM)
#modeldir=$WORK/sparse/inference/coco_sulawesi_simpleA9_mc10


#3 test borneowloc
#tiles=(T49MCT T49MCU T49MCV)


#modeldir=$SCRATCH/sparse/inference/palmcoco_kalimA_simpleA5 #palmtiles_simpleA #cococomplete_simpleA
#modeldir=$SCRATCH/sparse/inference/palmsarawak_simpleA9fix #palmtiles_simpleA #cococomplete_simpleA
#modeldir=$SCRATCH/sparse/inference/palmcocotiles2_coco_palm_kalim_simpleA
#modeldir=$SCRATCH/sparse/inference/palmsarawak_simpleA20_allsarawak
#modeldir=$SCRATCH/sparse/inference/palmsabah_simpleA9
#tiles=(T50NNL T50NNM)
#modeldir=$SCRATCH/sparse/inference/palmpeninsula2_simpleA

#modeldir=$WORK/sparse/inference/palmsarawak3_simpleA20clean_all
#modeldir=$WORK/sparse/inference/palmpeninsula2_simpleAall
#tiles=(T47NRE T48NTJ)

#BSUB -W 4:00
#BSUB -o /cluster/scratch/andresro/sparse/output/agg_pred_Le.%J.%I.txt
#BSUB -e /cluster/scratch/andresro/sparse/output/agg_pred_Le.%J.%I.txt
#BSUB -R "rusage[mem=64000]"
#BSUB -n 2
##BSUB -N
#BSUB -J aggregate[1-4]
#BSUB -w 'numended(11706259,*)'
#BSUB -u andresro@ethz.ch

#### BEGIN #####

index=$((LSB_JOBINDEX-1))

set +x


TILE=${tiles[index]}

set -x


DATADIR=$modeldir/$TILE

set +x

# module load python_cpu/3.7.1  gdal/2.4.4
module load python_cpu/3.7.1  gdal/3.1.2


set -x


# cd $HOME/code/sparsem
#python3 -u aggregate_per_tile.py $DATADIR --is-avgprobs --is-overwrite --is-clip-to-countries --is-reg-only --is-remove-water
python3 -u aggregate_per_tile.py $DATADIR --is-overwrite --is-clip-to-countries --is-reg-only --is-remove-water --mc-repetitions=5 --compression=12
# python3 -u aggregate_per_tile.py $DATADIR --is-clip-to-countries --is-reg-only --is-remove-water --mc-repetitions=5 --compression=12


# mkdir -p $DATADIR/n
# mkdir -p $DATADIR/std

# mv mv $DATADIR/*_n_0.tif $DATADIR/n/
# mv mv $DATADIR/*_n_0.tif $DATADIR/std/

#
#### END #####
